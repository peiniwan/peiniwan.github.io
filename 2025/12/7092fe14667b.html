

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="å…­æœˆçš„é›¨">
  <meta name="keywords" content="">
  
    <meta name="description" content="fmtjava&#x2F;Compose_Eyepetizer: ä¸€æ¬¾åŸºäº Jetpack Compose å®ç°çš„ç²¾ç¾ä»¿å¼€çœ¼è§†é¢‘App(æä¾›Kotlinã€Flutterã€React Nativeã€å°ç¨‹åºç‰ˆæœ¬ ğŸ˜ )]( https:&#x2F;&#x2F;github.com&#x2F;fmtjava&#x2F;Compose_Eyepetizer) navController1234567navController.navigate">
<meta property="og:type" content="article">
<meta property="og:title" content="1-å¼€å‘å®æˆ˜">
<meta property="og:url" content="http://peiniwan.github.io/2025/12/7092fe14667b.html">
<meta property="og:site_name" content="å…­æœˆçš„é›¨çš„ç¬”è®°">
<meta property="og:description" content="fmtjava&#x2F;Compose_Eyepetizer: ä¸€æ¬¾åŸºäº Jetpack Compose å®ç°çš„ç²¾ç¾ä»¿å¼€çœ¼è§†é¢‘App(æä¾›Kotlinã€Flutterã€React Nativeã€å°ç¨‹åºç‰ˆæœ¬ ğŸ˜ )]( https:&#x2F;&#x2F;github.com&#x2F;fmtjava&#x2F;Compose_Eyepetizer) navController1234567navController.navigate">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://obsidian-yupic.oss-cn-beijing.aliyuncs.com/mis/202512162149471.png">
<meta property="article:published_time" content="2025-12-16T13:59:22.490Z">
<meta property="article:modified_time" content="2025-12-16T13:49:33.787Z">
<meta property="article:author" content="å…­æœˆçš„é›¨">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://obsidian-yupic.oss-cn-beijing.aliyuncs.com/mis/202512162149471.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>1-å¼€å‘å®æˆ˜ - å…­æœˆçš„é›¨çš„ç¬”è®°</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"peiniwan.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>å…­æœˆçš„é›¨çš„åšå®¢</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="1-å¼€å‘å®æˆ˜"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-12-16 21:59" pubdate>
          2025å¹´12æœˆ16æ—¥ æ™šä¸Š
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          2.6k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          22 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">1-å¼€å‘å®æˆ˜</h1>
            
            
              <div class="markdown-body">
                
                <p>fmtjava&#x2F;Compose_Eyepetizer: ä¸€æ¬¾åŸºäº Jetpack Compose å®ç°çš„ç²¾ç¾ä»¿å¼€çœ¼è§†é¢‘App(æä¾›Kotlinã€Flutterã€React Nativeã€å°ç¨‹åºç‰ˆæœ¬ ğŸ˜ )]( <a target="_blank" rel="noopener" href="https://github.com/fmtjava/Compose_Eyepetizer">https://github.com/fmtjava/Compose_Eyepetizer</a>)</p>
<h1 id="navController"><a href="#navController" class="headerlink" title="navController"></a>navController</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">navController.<span class="hljs-title function_">navigate</span>(<span class="hljs-params">screen.route</span>) &#123;  <br>    <span class="hljs-title function_">popUpTo</span>(<span class="hljs-params">navController.graph.startDestinationId</span>) &#123;  <br>        saveState = <span class="hljs-literal">true</span>  <br>    &#125;  <br>    launchSingleTop = <span class="hljs-literal">true</span>  <br>    restoreState = <span class="hljs-literal">true</span>  <br>&#125;<br></code></pre></td></tr></table></figure>
<p>popUpTo (navController. graph. startDestinationId)<br>ä½œç”¨ï¼šå¯¼èˆªæ—¶æ¸…é™¤å›é€€æ ˆåˆ°æŒ‡å®šç›®çš„åœ°<br>æ•ˆæœï¼šæ¸…é™¤åˆ°èµ·å§‹ç›®çš„åœ°ä¹‹é—´çš„æ‰€æœ‰é¡µé¢ï¼Œé¿å…å›é€€æ ˆæ— é™å¢é•¿<br>saveState &#x3D; true<br>ä½œç”¨ï¼šä¿å­˜è¢«æ¸…é™¤é¡µé¢çš„çŠ¶æ€<br>æ•ˆæœï¼šå½“ç”¨æˆ·è¿”å›æ—¶ï¼Œé¡µé¢çŠ¶æ€å¾—ä»¥ä¿ç•™<br>launchSingleTop &#x3D; true<br>ä½œç”¨ï¼šå¦‚æœç›®æ ‡é¡µé¢å·²åœ¨æ ˆé¡¶ï¼Œåˆ™ä¸åˆ›å»ºæ–°å®ä¾‹<br>æ•ˆæœï¼šé¿å…é‡å¤åˆ›å»ºç›¸åŒé¡µé¢<br>restoreState &#x3D; true<br>ä½œç”¨ï¼šæ¢å¤ç›®æ ‡é¡µé¢ä¹‹å‰ä¿å­˜çš„çŠ¶æ€<br>æ•ˆæœï¼šæå‡ç”¨æˆ·ä½“éªŒï¼Œä¿ç•™é¡µé¢ä¹‹å‰çš„äº¤äº’çŠ¶æ€</p>
<p>val navController &#x3D; rememberNavController()<br>ä½œç”¨ï¼šåˆ›å»ºå¹¶è®°ä½ä¸€ä¸ª NavHostController å®ä¾‹ï¼Œç”¨äºç®¡ç†åº”ç”¨å†…çš„å¯¼èˆª<br>åŸç†ï¼šrememberNavController () æ˜¯ä¸€ä¸ªå¯ç»„åˆå‡½æ•°ï¼Œå®ƒç¡®ä¿åœ¨é‡ç»„æ—¶è¿”å›ç›¸åŒçš„ NavHostController å®ä¾‹<br>ç”¨é€”ï¼šé€šè¿‡è¿™ä¸ªæ§åˆ¶å™¨å¯ä»¥æ‰§è¡Œå¯¼èˆªæ“ä½œï¼Œå¦‚ navigate ()ã€popBackStack () ç­‰</p>
<h1 id="å˜é‡å†™æ³•"><a href="#å˜é‡å†™æ³•" class="headerlink" title="å˜é‡å†™æ³•"></a>å˜é‡å†™æ³•</h1><h2 id="StateFlow"><a href="#StateFlow" class="headerlink" title="StateFlow"></a>StateFlow</h2><ol>
<li>çŠ¶æ€å°è£…åŸåˆ™<br>ä½¿ç”¨ private val _smsState ä½œä¸ºå†…éƒ¨å¯å˜çŠ¶æ€</li>
</ol>
<p>ä½¿ç”¨ val smsState ä½œä¸ºå¯¹å¤–æš´éœ²çš„ä¸å¯å˜çŠ¶æ€æµ</p>
<p>éµå¾ªäº†çŠ¶æ€å°è£…çš„æœ€ä½³å®è·µï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥ä¿®æ”¹çŠ¶æ€</p>
<ol start="2">
<li><p>StateFlow ç‰¹æ€§<br>MutableStateFlow&lt;SmsState&gt; åˆ›å»ºäº†ä¸€ä¸ªå¯å˜çš„çŠ¶æ€æµ<br>asStateFlow() å°†å¯å˜æµè½¬æ¢ä¸ºåªè¯»æµæš´éœ²ç»™å¤–éƒ¨</p>
</li>
<li><p>çŠ¶æ€ç®¡ç†ä¼˜åŠ¿<br>å•å‘æ•°æ®æµï¼šå¤–éƒ¨åªèƒ½è§‚å¯ŸçŠ¶æ€ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹<br>çº¿ç¨‹å®‰å…¨ï¼šåç¨‹ Flow ä¿è¯äº†çŠ¶æ€æ›´æ–°çš„çº¿ç¨‹å®‰å…¨æ€§<br>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ï¼šé…åˆ Compose æˆ– Lifecycle å¯ä»¥è‡ªåŠ¨å¤„ç†è®¢é˜…ç”Ÿå‘½å‘¨æœŸ</p>
</li>
<li><p>ä½¿ç”¨åœºæ™¯<br>åœ¨ SmsCodePage ä¸­å¯ä»¥é€šè¿‡.collectæˆ–.collectAsStateæ¥è§‚å¯Ÿ smsState çš„å˜åŒ–ï¼Œæ ¹æ®ä¸åŒçš„çŠ¶æ€ï¼ˆLoadingã€Successã€Errorã€Idleï¼‰æ¥æ›´æ–° UI æ˜¾ç¤ºã€‚</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-type">val</span> <span class="hljs-variable">_smsState</span> <span class="hljs-operator">=</span> MutableStateFlow&lt;SmsState&gt;(SmsState. Idle)<br>val smsState: StateFlow&lt;SmsState&gt; = _smsState.asStateFlow ()<br>val state by viewModel.smsState.collectAsState ()<br></code></pre></td></tr></table></figure>


<p><strong>è‡ªåŠ¨é‡ç»„</strong>ï¼šå½“ Flow å‘å°„æ–°å€¼æ—¶ï¼ŒCompose ä¼šè§¦å‘ UI é‡ç»„ã€‚</p>
<p><strong>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong>ï¼šåœ¨ <code>@Composable</code> ç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨è·Ÿéš <code>Lifecycle</code> å–æ¶ˆè®¢é˜…ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å¯¹æ¯”é¡¹</th>
<th align="left">collect ()</th>
<th align="left">collectAsState ()</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ä½¿ç”¨ç¯å¢ƒ</td>
<td align="left">ä»»æ„åç¨‹ç¯å¢ƒ</td>
<td align="left">ä»… Compose</td>
</tr>
<tr>
<td align="left">è¿”å›ç±»å‹</td>
<td align="left">æ— è¿”å›å€¼ (suspend å‡½æ•°)</td>
<td align="left">State<T> (Compose å¯è§‚å¯Ÿ)</td>
</tr>
<tr>
<td align="left">æ˜¯å¦è§¦å‘é‡ç»„</td>
<td align="left">å¦âŒ</td>
<td align="left">æ˜¯</td>
</tr>
<tr>
<td align="left">æ˜¯å¦è‡ªåŠ¨å¤„ç†ç”Ÿå‘½å‘¨æœŸ</td>
<td align="left">å¦ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†âœ…</td>
<td align="left">Compose è‡ªåŠ¨ç®¡ç†</td>
</tr>
<tr>
<td align="left">å¸¸è§åœºæ™¯</td>
<td align="left">ViewModelã€Repositoryã€åå°é€»è¾‘</td>
<td align="left">Compose UI å±‚</td>
</tr>
</tbody></table>
<h2 id="collectAsState"><a href="#collectAsState" class="headerlink" title="collectAsState"></a>collectAsState</h2><p>æ˜¯ <strong>Jetpack</strong> <strong>Compose</strong> ä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œç”¨æ¥æŠŠ <strong>Flow&#x2F;StateFlow</strong> è½¬æ¢æˆ Compose å¯æ„ŸçŸ¥çš„ <code>State&lt;T&gt;</code>ï¼Œä»è€Œè®© UI è‡ªåŠ¨å“åº”æ•°æ®å˜åŒ–ã€‚<br><strong>è‡ªåŠ¨é‡ç»„</strong>ï¼šå½“ Flow å‘å°„æ–°å€¼æ—¶ï¼ŒCompose ä¼šè§¦å‘ UI é‡ç»„ã€‚<br><strong>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong>ï¼šåœ¨ <code>@Composable</code> ç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨è·Ÿéš <code>Lifecycle</code> å–æ¶ˆè®¢é˜…ï¼Œé¿å…å†…å­˜æ³„æ¼</p>
<h2 id="mutableStateOf-ï¼ˆä¸æ¨èï¼‰"><a href="#mutableStateOf-ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="mutableStateOf ï¼ˆä¸æ¨èï¼‰"></a>mutableStateOf ï¼ˆä¸æ¨èï¼‰</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Plain">// ğŸ‘‡ æ–°å¢ï¼šç”¨ mutableStateOf æ¥ä¿å­˜ currentStepï¼Œè¿™æ · Compose èƒ½è‡ªåŠ¨é‡ç»„<br>var currentStep by mutableIntStateOf(1)<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Plain">LaunchedEffect(nextStep) &#123;<br>    viewModel.currentStep = nextStep<br>&#125;<br>val currentStep = viewModel.currentStep<br></code></pre></td></tr></table></figure>

<p><strong>é—®é¢˜</strong></p>
<ul>
<li>viewModel çš„currentStep å˜åŒ– page çš„currentStep ä¹Ÿä¼šå˜åŒ–å—ï¼Œæ²¡çœ‹åˆ°LaunchedEffect(currentStep) {  ä¹Ÿä¼šé‡ç»„å—</li>
</ul>
<p>ä¼šçš„â€”â€”åªè¦ currentStep åœ¨ ViewModel é‡Œæ˜¯ mutableStateOfï¼ˆæˆ– StateFlow è½¬æˆ Stateï¼‰ï¼Œé¡µé¢é‡Œè¯»å–åˆ°äº†è¿™ä¸ª stateï¼Œå®ƒå˜æ›´æ—¶å°±ä¼šè§¦å‘é‡ç»„ã€‚ä¸éœ€è¦ LaunchedEffect(currentStep) æ¥é©±åŠ¨ UI æ›´æ–°ã€‚</p>
<ul>
<li>ä¸ºä»€ä¹ˆä¸éœ€è¦ LaunchedEffect</li>
</ul>
<p>Compose ä¼šè‡ªåŠ¨è·Ÿè¸ªåœ¨ç»„åˆé˜¶æ®µè¢«è¯»å–çš„ Stateï¼ˆå¦‚ mutableStateOfï¼‰ã€‚<br>å½“è¿™ä¸ª State çš„å€¼å˜åŒ–æ—¶ï¼Œè¯»å–å®ƒçš„ Composable ä¼šè‡ªåŠ¨ recomposeã€‚<br>LaunchedEffect ç”¨äºå‰¯ä½œç”¨ï¼ˆå¦‚å‘èµ·è¯·æ±‚ã€å¯¼èˆªã€åŠ¨ç”»ï¼‰ï¼Œä¸æ˜¯ç”¨æ¥è®© UI ç›‘å¬ state çš„ã€‚<br>è‹¥ä½ ç”¨çš„æ˜¯ StateFlowï¼ŒåŒç†ï¼Œåœ¨ VM æš´éœ² StateFlow&lt;Int&gt;ï¼Œåœ¨ UI ç”¨ collectAsState() å³å¯</p>
<ul>
<li>val accountInfoBean by viewModel. accountInfoBean<br>ä¼šçš„ã€‚åªè¦ viewModel. accountInfoBean æ˜¯ä¸€ä¸ª mutableStateOfï¼ˆæˆ– State&lt;T&gt;ï¼‰ï¼Œé‚£è¿™è¡Œä»£ç å°±å·²ç»åœ¨ Compose ä¸­å»ºç«‹äº†è®¢é˜…å…³ç³»ã€‚å½“ ViewModel ä¸­çš„å€¼å˜åŒ–æ—¶ï¼ŒUI ä¼šè‡ªåŠ¨é‡ç»„ã€‚</li>
</ul>
<p><strong>å°ç»“</strong></p>
<p>âœ… è¯» mutableStateOf&#x2F;collectAsState() â†’ å€¼å˜åŒ–è‡ªåŠ¨é‡ç»„<br>âŒ ä¸éœ€è¦ LaunchedEffect(currentStep)<br>âœ… ä»…åœ¨éœ€è¦â€œåšä¸€æ¬¡äº‹â€ï¼ˆå¦‚ç”¨ nextStep åˆå§‹åŒ–ã€å‘è¯·æ±‚ï¼‰æ—¶ç”¨ LaunchedEffect(â€¦)</p>
<h2 id="liveData"><a href="#liveData" class="headerlink" title="liveData"></a>liveData</h2><p>ï¼ˆ1ï¼‰<code>State&lt;T&gt;</code> æ˜¯ Compose çš„â€œåŸç”Ÿâ€çŠ¶æ€ç±»å‹</p>
<ul>
<li>Compose çš„ <code>@Composable</code> å‡½æ•°å¤©ç„¶ç›‘å¬ <code>State&lt;T&gt;</code> çš„å˜åŒ–å¹¶è§¦å‘é‡ç»„ã€‚</li>
<li><code>LiveData</code> éœ€è¦é€šè¿‡ <code>observeAsState()</code> è½¬æ¢ä¸º <code>State</code> æ‰èƒ½åœ¨ Compose ä¸­ä½¿ç”¨ï¼Œå¤šäº†ä¸€å±‚è½¬æ¢ã€‚</li>
<li>ç›´æ¥ä½¿ç”¨ <code>mutableStateOf</code> æ›´ç®€æ´ã€é«˜æ•ˆï¼Œæ— éœ€ä¾èµ– Android ç”Ÿå‘½å‘¨æœŸç»„ä»¶ã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰<code>LiveData</code> æ˜¯ä¸ºä¼ ç»Ÿ View ç³»ç»Ÿè®¾è®¡çš„</p>
<ul>
<li><code>LiveData</code> çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ï¼ˆè‡ªåŠ¨åœ¨ <code>onStop</code> æ—¶åœæ­¢é€šçŸ¥ï¼‰ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</li>
<li>ä½†åœ¨ Compose ä¸­ï¼ŒUI çš„ç”Ÿå‘½å‘¨æœŸç”± Compose è‡ªå·±ç®¡ç†ï¼ˆé€šè¿‡ <code>DisposableEffect</code>ã€<code>LaunchedEffect</code> ç­‰ï¼‰ï¼Œä¸å†ä¾èµ– <code>LifecycleOwner</code>ã€‚</li>
<li>å› æ­¤ <code>LiveData</code> çš„ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ä¼˜åŠ¿åœ¨ Compose ä¸­ å˜å¾—å†—ä½™ç”šè‡³å¤šä½™ã€‚</li>
</ul>
<p>ï¼ˆ3ï¼‰<code>StateFlow</code> &#x2F; <code>SharedFlow</code> æ›´é€‚åˆç°ä»£ Compose æ¶æ„</p>
<h2 id="ä¿®æ”¹ä¼ å…¥çš„å€¼ã€rememberSaveable"><a href="#ä¿®æ”¹ä¼ å…¥çš„å€¼ã€rememberSaveable" class="headerlink" title="ä¿®æ”¹ä¼ å…¥çš„å€¼ã€rememberSaveable"></a>ä¿®æ”¹ä¼ å…¥çš„å€¼ã€rememberSaveable</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Plain">@Composable<br>fun UpdateInfoPage(nextStep: Int) &#123;<br>    val viewModel: UpdateInfoViewModel = hiltViewModel()<br>    val context = LocalContext.current<br>    val navController = LocalNavController.current<br><br>    // è¿™é‡Œä½¿ç”¨ rememberSaveable ä¿æŒæ­¥éª¤çŠ¶æ€å¯ä¿®æ”¹ã€å¯è®°å¿†<br>    var currentStep by rememberSaveable &#123; mutableIntStateOf(nextStep) &#125;<br></code></pre></td></tr></table></figure>

<p><em>â—ä¸è¦ç”¨ remember åŒ…ä½ï¼›ä¿è¯æ¯æ¬¡ç‚¹å‡»éƒ½æ‹¿åˆ°â€œæœ€æ–°çš„æƒé™&#x2F;éšç§çŠ¶æ€â€</em></p>
<h1 id="æ™ºèƒ½é‡ç»„çš„å‘"><a href="#æ™ºèƒ½é‡ç»„çš„å‘" class="headerlink" title="æ™ºèƒ½é‡ç»„çš„å‘"></a>æ™ºèƒ½é‡ç»„çš„å‘</h1><p>Compose çš„é‡ç»„æ˜¯ â€œæŒ‰è¯»å–å­—æ®µâ€ è§¦å‘çš„ï¼Œä¸æ˜¯â€œæŒ‰å¯¹è±¡å¼•ç”¨â€ã€‚</p>
<h3 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Plain">@Composable<br>fun HomePageContent(orderState: OrderStateBean) &#123;<br>    Text(text = orderState.title)        // åªè¯»äº† title<br>    if (orderState.hasUnread) &#123;          // åªè¯»äº† hasUnread<br>        Badge()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>ğŸ”¥ å³ä½¿ <code>orderStateBean.value = newBean</code>ï¼ˆæ•´ä¸ªå¯¹è±¡å˜äº†ï¼‰ï¼Œåªè¦ <code>title</code> å’Œ <code>hasUnread</code> çš„å€¼æ²¡å˜ï¼Œ<code>HomePageContent</code> å°±ä¸ä¼šé‡ç»„ï¼</p>
</blockquote>
<h1 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Plain">LifecycleResumeEffect(Unit) &#123;<br>    launchInProgress = false<br>    onPauseOrDispose &#123; &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="å¥½å›¾ç‰‡"><a href="#å¥½å›¾ç‰‡" class="headerlink" title="å¥½å›¾ç‰‡"></a>å¥½å›¾ç‰‡</h1><p><img src="https://obsidian-yupic.oss-cn-beijing.aliyuncs.com/mis/202512162149471.png" srcset="/img/loading.gif" lazyload alt="00bb3c10cefd1a117f526af3ecb4f0c0_MD5"></p>
<h1 id="æ ‡å‡†ä»£ç ç»“æ„"><a href="#æ ‡å‡†ä»£ç ç»“æ„" class="headerlink" title="æ ‡å‡†ä»£ç ç»“æ„"></a>æ ‡å‡†ä»£ç ç»“æ„</h1><p>UI ä¸é€»è¾‘åˆ†ç¦» + åªå¯¹çº¯çŠ¶æ€ç»„ä»¶é¢„è§ˆ</p>
<ul>
<li><p>å°† UI æ‹†åˆ†ä¸ºä¸¤ä¸ªå‡½æ•°ï¼š</p>
<ol>
<li><code>SmsCodePage</code>ï¼šè´Ÿè´£å’Œ ViewModelã€NavControllerã€çŠ¶æ€ç®¡ç†äº¤äº’ï¼ˆä¸é¢„è§ˆï¼‰</li>
<li><code>SmsCodeContent</code>ï¼šåªæ¥æ”¶ UI çŠ¶æ€ï¼ˆå¦‚ phoneã€otpValueã€loadingã€error ç­‰ï¼‰ï¼Œè´Ÿè´£æ¸²æŸ“ï¼ˆå¯é¢„è§ˆï¼‰</li>
</ol>
</li>
<li><p>ç»™ <code>SmsCodeContent</code> æ·»åŠ  <code>@Preview</code>ï¼Œè®©å®ƒèƒ½ç‹¬ç«‹å±•ç¤ºå„ç§ UI çŠ¶æ€ã€‚</p>
</li>
</ul>
<h1 id="apiç”¨æ³•"><a href="#apiç”¨æ³•" class="headerlink" title="apiç”¨æ³•"></a>apiç”¨æ³•</h1><h2 id="any"><a href="#any" class="headerlink" title="any"></a>any</h2><p><strong>true</strong>ï¼šå¦‚æœé›†åˆä¸­ <strong>è‡³å°‘æœ‰ä¸€ä¸ª</strong> å…ƒç´ æ»¡è¶³æ¡ä»¶</p>
<p><strong>false</strong>ï¼šå¦‚æœ <strong>æ²¡æœ‰ä»»ä½•</strong> å…ƒç´ æ»¡è¶³æ¡ä»¶</p>
<p>val showDisburseFailedDialog &#x3D; remember(ordersList) {</p>
<p>mutableStateOf(ordersList.any { it.checkStatus &#x3D;&#x3D; 6 })</p>
<p>}</p>
<p>&#x2F;&#x2F;tood å¦‚æœordersListé‡Œ æœ‰OrderListItem çš„ checkStatus ä¸º 6æ˜¯ æ˜¾ç¤ºshowDisburseFailedDialog</p>
<h2 id="takeIf"><a href="#takeIf" class="headerlink" title="takeIf"></a><em>takeIf</em></h2><p>  ocr. idPhotoId.<em>takeIf</em> <strong>{ it</strong> !&#x3D; null <strong>}</strong> ?: oldIdentity?. idPhotoId</p>
<p>æ»¡è¶³æ˜¯å‰é¢ï¼Œä¸æ»¡è¶³æ˜¯åé¢</p>
<h1 id="åªåŠ è½½ä¸€æ¬¡"><a href="#åªåŠ è½½ä¸€æ¬¡" class="headerlink" title="åªåŠ è½½ä¸€æ¬¡"></a>åªåŠ è½½ä¸€æ¬¡</h1><p>rememberSaveable</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Plain">var hasInitLoaded by rememberSaveable &#123; mutableStateOf(false) &#125;<br>LaunchedEffect(hasInitLoaded) &#123;<br>    if (!hasInitLoaded) &#123;<br>        changeCardViewModel.getAccountInfoAndDictConfig()<br>        refreshOrders()<br>        hasInitLoaded = true<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="å›¾æ ‡"><a href="#å›¾æ ‡" class="headerlink" title="å›¾æ ‡"></a>å›¾æ ‡</h1><h2 id="å°ºå¯¸"><a href="#å°ºå¯¸" class="headerlink" title="å°ºå¯¸"></a>å°ºå¯¸</h2><p>mdpi 48x48</p>
<p>hdpi 72x72</p>
<p>xhdpi 96x96</p>
<p>xxhdpi 144x144</p>
<p>xxxhdpi 192x192</p>
<p>COMPOSEä¸æ”¯æŒ.9å›¾</p>
<h2 id="å»æ‰ç‚¹å‡»æ•ˆæœ"><a href="#å»æ‰ç‚¹å‡»æ•ˆæœ" class="headerlink" title="å»æ‰ç‚¹å‡»æ•ˆæœ"></a>å»æ‰ç‚¹å‡»æ•ˆæœ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Plain">Row(<br>    modifier = modifier<br>        .fillMaxWidth()<br>        .clickable(<br>            interactionSource = remember &#123; MutableInteractionSource() &#125;,<br>            indication = null<br>        ) &#123; onClick() &#125;,<br>    verticalAlignment = Alignment.CenterVertically<br>) &#123;<br></code></pre></td></tr></table></figure>

<h2 id="æœ¬åœ°å›¾ç‰‡åšèƒŒæ™¯"><a href="#æœ¬åœ°å›¾ç‰‡åšèƒŒæ™¯" class="headerlink" title="æœ¬åœ°å›¾ç‰‡åšèƒŒæ™¯"></a>æœ¬åœ°å›¾ç‰‡åšèƒŒæ™¯</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Plain">@Composable<br>fun UpdateInfoCardContainer(<br>    modifier: Modifier = Modifier,<br>    content: @Composable ColumnScope.() -&gt; Unit<br>) &#123;<br>    Column(<br>        modifier = modifier<br>            .fillMaxWidth()<br>            .clip(RoundedCornerShape(10.dp)) // åœ†è§’<br>            .paint(<br>                painter = painterResource(id = R.drawable.profile_tab_card_bg), // æœ¬åœ°åˆ‡å›¾<br>                contentScale = ContentScale.Crop         // æ‹‰ä¼¸æ–¹å¼<br>            )<br>            .padding(16.dp),<br>        content = content<br>    )<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="å‘"><a href="#å‘" class="headerlink" title="å‘"></a>å‘</h1><ul>
<li>Data classæ”¹æˆclass å¯ä»¥æ··æ·†ï¼Œè¦ä¸ç„¶ toString å°±åˆèƒ½çœ‹åˆ°æ··æ·†å‰çš„æ•°æ®</li>
</ul>
<p>å‡½æ•°è¦åŠ ï¼ˆï¼‰</p>
<p>IconButton( onClick &#x3D; <strong>{</strong> onBackClick()</p>
<p>&#x2F;&#x2F;onBackClick è°ƒä¸äº† <strong>}</strong>,</p>
<h2 id="å…ˆåé¡ºåº"><a href="#å…ˆåé¡ºåº" class="headerlink" title="å…ˆåé¡ºåº"></a>å…ˆåé¡ºåº</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs Plain">Box(Modifier.navigationBarsPadding()) &#123;<br>    Box(<br>        modifier = Modifier<br>            .fillMaxWidth()<br>            .padding(horizontal = 16.dp, vertical = 16.dp) // å¤–è¾¹è·<br>            .height(44.dp)<br>            .clip( RoundedCornerShape(10.dp))      // å…ˆè£åœ†è§’<br>            .background(Color(0xFFCCCCCC))            // å†ç”»èƒŒæ™¯ï¼Œè¿™æ ·ä¼šè¢«åœ†è§’è£å‰ª<br>            .clickable &#123; onConfirm() &#125;,<br>        contentAlignment = Alignment.Center<br>    ) &#123;<br>        Text(<br>            text = confirmText,<br>            color =  Color.White,<br>            fontWeight = FontWeight.Bold,<br>            fontSize = 16.sp<br>        )<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="å¸¸ç”¨ç»„ä»¶"><a href="#å¸¸ç”¨ç»„ä»¶" class="headerlink" title="å¸¸ç”¨ç»„ä»¶"></a>å¸¸ç”¨ç»„ä»¶</h1><h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><p>weight ç”¨äºè®¾ç½®å­å…ƒç´ çš„æƒé‡ï¼Œæƒé‡è¶Šå¤§ï¼Œå æ®çš„ç©ºé—´å°±è¶Šå¤§</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">Column (modifier <span class="hljs-operator">=</span> Modifier.weight (<span class="hljs-number">1</span>f) <br></code></pre></td></tr></table></figure>

<p>thickness åˆ†å‰²çº¿çš„åšåº¦  </p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Divider</span> (thickness = <span class="hljs-number">0</span>.<span class="hljs-number">5</span>. dp, modifier = Modifier.padding (top = <span class="hljs-number">5</span>. dp))<br></code></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªå°åœ†ç‚¹  </p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lisp">Box (<span class="hljs-name">modifier</span> = Modifier  <br>    .padding (<span class="hljs-number">2</span>. dp)  <br>    .clip (<span class="hljs-name">CircleShape</span>)  <br>    .background (<span class="hljs-name">color</span>)  <br>    .size (<span class="hljs-number">8</span>. dp))<br></code></pre></td></tr></table></figure>



<h2 id="èƒŒæ™¯æœ¬åœ°åˆ‡å›¾"><a href="#èƒŒæ™¯æœ¬åœ°åˆ‡å›¾" class="headerlink" title="èƒŒæ™¯æœ¬åœ°åˆ‡å›¾"></a>èƒŒæ™¯æœ¬åœ°åˆ‡å›¾</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Plain">@Composable<br>private fun TimeBlock(text: String) &#123;<br>    Box(<br>        modifier = Modifier<br>            .width(120.dp)<br>            .height(124.dp)<br>            .clip(RoundedCornerShape(8.dp)),<br>        contentAlignment = Alignment.Center<br>    ) &#123;<br>        Image(<br>            painter = painterResource(id = R.drawable.home_countdown_time_bg),<br>            contentDescription = null,<br>            contentScale = ContentScale.FillBounds,<br>            modifier = Modifier.matchParentSize()<br>        )<br><br>        Text(<br>            text = text,<br>            color = FFFDD17B,<br>            fontSize = 48.sp,<br>            fontWeight = FontWeight.Bold<br>        )<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="æ¸å˜"><a href="#æ¸å˜" class="headerlink" title="æ¸å˜"></a>æ¸å˜</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Plain">Brush.horizontalGradient(<br>    colors = listOf(<br>        FFE46C15,<br>        FFF8B42B,<br>    )<br>)<br></code></pre></td></tr></table></figure>

<h2 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Plain">Button(<br>    onClick = &#123;<br>        onLeftClick()<br>    &#125;,<br>    shape = shape,<br>    colors = ButtonDefaults.buttonColors(<br>        containerColor = FF1A1A1A  // è®¾ç½®èƒŒæ™¯è‰²<br>    ),<br>    modifier = Modifier<br>        .weight(1f)<br>        .border(1.dp, FF4D4C4A, shape).height(40.dp), //å‘ï¼šheightå†æœ€åï¼Œè¦ä¸ç„¶ä¼šè¦†ç›–<br>) &#123;<br>    Text(<br>        leftString,<br>        fontSize = 14.sp,<br>        color = Color.White<br>    )<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Plain">Column(<br>    modifier = Modifier.padding(24.dp),<br>    horizontalAlignment = Alignment.CenterHorizontally<br>) &#123;<br>    Text(<br>        content,<br>        color = Color.White.copy(alpha = 0.8f),<br>        fontSize = 14.sp,<br>        textAlign = TextAlign.Center<br>    )<br> )<br></code></pre></td></tr></table></figure>

<p>lineHeight &#x3D; 12.<em>sp</em>, è¡Œé«˜</p>
<h2 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Plain">Image(<br>    painter = painterResource(R.drawable.home_update_fail),<br>    contentDescription = null,<br>    modifier = Modifier<br>        .align(Alignment.TopCenter)<br>        .offset(y = -40.dp)<br>        .requiredSize(350.dp) //çªç ´çˆ¶viewçš„é™åˆ¶<br>)<br></code></pre></td></tr></table></figure>


<h2 id="ViewPagerã€HorizontalPager"><a href="#ViewPagerã€HorizontalPager" class="headerlink" title="ViewPagerã€HorizontalPager"></a>ViewPagerã€HorizontalPager</h2><p>&#x2F;&#x2F;ViewPager2, é€šè¿‡å°†æ­¤çŠ¶æ€å¯¹è±¡ä¿å­˜åœ¨ç»„ä»¶ä¸­ï¼Œå¯ä»¥ç¡®ä¿å½“ç»„ä»¶é‡æ–°åˆæˆæ—¶ï¼Œåˆ†é¡µçŠ¶æ€ä¸ä¼šä¸¢å¤±ã€‚  </p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">val pagerState <span class="hljs-operator">=</span> rememberPagerState ()<br></code></pre></td></tr></table></figure>

<p>HorizontalPager æ˜¯ä¸€ç§ç”¨äºæ„å»ºæ¨ªå‘æ»šåŠ¨é¡µé¢çš„ç»„ä»¶ã€‚å®ƒå…è®¸æ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­åˆ›å»ºæ°´å¹³æ»‘åŠ¨çš„é¡µé¢å¸ƒå±€ï¼Œç±»ä¼¼äº ViewPager æˆ– RecyclerViewã€‚</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs scss">HorizontalPager (pageCount = <span class="hljs-number">4</span>,  <br>    userScrollEnabled = false,  <br>    state = pagerState,  <br>    modifier = Modifier  <br>        .fillMaxSize ()  <br>        <span class="hljs-selector-class">.background</span> (Color. White)  <br>        <span class="hljs-selector-class">.padding</span> (padding)) &#123; pageIndex -&gt;  <br>    when (pageIndex) &#123;  <br>        <span class="hljs-number">0</span> -&gt; DailyPage ()  <br>        <span class="hljs-number">1</span> -&gt; DiscoverPage ()  <br>        <span class="hljs-number">2</span> -&gt; HotPage ()  <br>        <span class="hljs-number">3</span> -&gt; PersonPage ()  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure>


<h2 id="padding"><a href="#padding" class="headerlink" title="padding"></a>padding</h2><p>åœ¨ Compose ä¸­ï¼Œç¡®å®æ²¡æœ‰ <code>margin</code> ä¿®é¥°ç¬¦ï¼Œåªæœ‰ <code>padding</code> ä¿®é¥°ç¬¦ã€‚å¦‚æœæ‚¨æƒ³åœ¨ <code>Text</code> ç»„ä»¶å‘¨å›´åˆ›å»ºé—´è·ï¼Œå¯ä»¥ä½¿ç”¨ <code>padding</code> ä¿®é¥°ç¬¦æ¥å®ç°ç±»ä¼¼çš„æ•ˆæœã€‚åœ¨æ‚¨æä¾›çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œ<code>Modifier.padding (top = 3. dp)</code> å°†åœ¨ <code>Text</code> ç»„ä»¶çš„é¡¶éƒ¨æ·»åŠ 3dp çš„å†…è¾¹è·ï¼Œä»è€Œåˆ›å»ºäº†ä¸ <code>margin</code> ç±»ä¼¼çš„æ•ˆæœã€‚</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">Text <span class="hljs-params">(<span class="hljs-attr">text</span> = itemData. author?. description ?: &quot;&quot;,  </span><br><span class="hljs-params">    <span class="hljs-attr">color</span> = Color. White,  </span><br><span class="hljs-params">    <span class="hljs-attr">fontSize</span> = 13. sp, <span class="hljs-attr">modifier</span> = Modifier.padding (<span class="hljs-attr">top</span> = 3. dp)</span>)<br></code></pre></td></tr></table></figure>
<p>æˆ–è€…ï¼š</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lisp">Spacer (<span class="hljs-name">modifier</span> = Modifier.height (<span class="hljs-number">10</span>. dp))<br></code></pre></td></tr></table></figure>

<h2 id="zIndex"><a href="#zIndex" class="headerlink" title="zIndex"></a>zIndex</h2><p><code>zIndex</code> æ˜¯æŒ‡å®šè§†å›¾çš„å±‚çº§é¡ºåºçš„å±æ€§ã€‚å®ƒæ§åˆ¶äº†è§†å›¾åœ¨å±å¹•ä¸Šçš„æ˜¾ç¤ºé¡ºåºã€‚å…·æœ‰è¾ƒé«˜ <code>zIndex</code> å€¼çš„è§†å›¾å°†æ˜¾ç¤ºåœ¨å…·æœ‰è¾ƒä½ <code>zIndex</code> å€¼çš„è§†å›¾ä¹‹ä¸Šã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè§†å›¾çš„ <code>zIndex</code> å€¼ä¸º0ã€‚å¦‚æœè®¾ç½®ä¸€ä¸ªè¾ƒå¤§çš„æ­£å€¼ï¼Œåˆ™è§†å›¾å°†æ˜¾ç¤ºåœ¨å…¶ä»–è§†å›¾çš„ä¸Šæ–¹ã€‚å¦‚æœè®¾ç½®ä¸€ä¸ªè¾ƒå°çš„è´Ÿå€¼ï¼Œåˆ™è§†å›¾å°†æ˜¾ç¤ºåœ¨å…¶ä»–è§†å›¾çš„ä¸‹æ–¹ã€‚å½“ä¸¤ä¸ªè§†å›¾çš„ <code>zIndex</code> ç›¸åŒæ—¶ï¼Œå®ƒä»¬å°†æŒ‰ç…§å®ƒä»¬åœ¨å¸ƒå±€æ–‡ä»¶ä¸­çš„é¡ºåºè¿›è¡Œç»˜åˆ¶ã€‚</p>
<p>é€šè¿‡è°ƒæ•´è§†å›¾çš„ <code>zIndex</code> å±æ€§ï¼Œæ‚¨å¯ä»¥æ§åˆ¶è§†å›¾çš„å åŠ é¡ºåºï¼Œä»è€Œè¾¾åˆ°è¦†ç›–æˆ–éšè—å…¶ä»–è§†å›¾çš„æ•ˆæœã€‚</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lisp">DiscoverTabPageWidget (<span class="hljs-name">pagerState</span>, modifier = Modifier  <br>    .weight (<span class="hljs-number">1</span>f)  <br>    .zIndex (<span class="hljs-name">-1f</span>))<br></code></pre></td></tr></table></figure>


<h1 id="evnetBus"><a href="#evnetBus" class="headerlink" title="evnetBus"></a>evnetBus</h1><ul>
<li>å®šä¹‰ä¸€ä¸ª <strong>åœ¨ Activity èŒƒå›´å†…å…±äº«çš„ ViewModel</strong>ï¼Œå­˜æ”¾ä½ è¦å¹¿æ’­çš„äº‹ä»¶ã€‚</li>
<li>å„ä¸ªé¡µé¢é€šè¿‡ <code>viewModel()</code> &#x2F; <code>hiltViewModel()</code> è·å–åŒä¸€ä¸ªå®ä¾‹ï¼Œç›´æ¥è®¢é˜…çŠ¶æ€ã€‚</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// å…±äº«çš„äº‹ä»¶ä¸­å¿ƒ</span><br><span class="hljs-meta">@HiltViewModel</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">EventBusViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>() : ViewModel() &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _event = MutableSharedFlow&lt;String&gt;() <span class="hljs-comment">// å¯ä»¥æ¢æˆ StateFlow</span><br>    <span class="hljs-keyword">val</span> event = _event.asSharedFlow()<br><br>    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sendEvent</span><span class="hljs-params">(msg: <span class="hljs-type">String</span>)</span></span> &#123;<br>        _event.emit(msg)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//å‘é€</span><br><span class="hljs-keyword">val</span> eventBus: EventBusViewModel = hiltViewModel()<br>LaunchedEffect(<span class="hljs-built_in">Unit</span>) &#123;<br>    eventBus.sendEvent(<span class="hljs-string">&quot;æ¥è‡ªé¡µé¢Açš„æ¶ˆæ¯&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">//ç›‘å¬</span><br><span class="hljs-keyword">val</span> eventBus: EventBusViewModel = hiltViewModel()<br>LaunchedEffect(<span class="hljs-built_in">Unit</span>) &#123;<br>    eventBus.event.collect &#123; msg -&gt;<br>        Log.d(<span class="hljs-string">&quot;EventBus&quot;</span>, <span class="hljs-string">&quot;æ”¶åˆ°æ¶ˆæ¯: <span class="hljs-variable">$msg</span>&quot;</span>)<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p><strong>é€šå¸¸ä¸éœ€è¦ä½ æ‰‹åŠ¨å–æ¶ˆç›‘å¬</strong>ã€‚</p>
<p>åŸå› æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li><p><strong><code>collect</code> çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç»‘å®šåœ¨ Composable çš„ <code>LaunchedEffect</code> æˆ– <code>DisposableEffect</code> ä¸Šçš„</strong></p>
<ul>
<li>å½“ Composable ç¦»å¼€ç•Œé¢æ—¶ï¼Œå®ƒçš„åç¨‹ä¼šè‡ªåŠ¨å–æ¶ˆï¼ŒFlow çš„æ”¶é›†ä¹Ÿä¼šç»“æŸã€‚</li>
<li>æ‰€ä»¥ä¸ä¼šåƒä¼ ç»Ÿ EventBus ä¸€æ ·å‡ºç°ã€Œå¿˜è®° unregister å¯¼è‡´æ³„æ¼ã€çš„é—®é¢˜ã€‚</li>
</ul>
</li>
<li><p><strong>ViewModel çš„ä½œç”¨åŸŸå— Activity&#x2F;Navigation æ§åˆ¶</strong></p>
<ul>
<li>Activity é”€æ¯æ—¶ï¼ŒViewModel ä¹Ÿä¼šé”€æ¯ï¼Œå†…éƒ¨çš„ Flow ä¹Ÿä¸å†æ¨é€äº‹ä»¶ã€‚</li>
</ul>
</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80/" class="category-chain-item">å…¶ä»–è¯­è¨€</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>1-å¼€å‘å®æˆ˜</div>
      <div>http://peiniwan.github.io/2025/12/7092fe14667b.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>å…­æœˆçš„é›¨</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´12æœˆ16æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/12/a197a06b33a6.html" title="2-Compose åŸºç¡€">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">2-Compose åŸºç¡€</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/12/e15cb1ec3664.html" title="æ³¨è§£ã€AOPã€APT">
                        <span class="hidden-mobile">æ³¨è§£ã€AOPã€APT</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"OwNIdaopOn1rwNhtotGOGC0B-gzGzoHsz","appKey":"eadytQ2XqWmxuvAKeg08XX83","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":false,"serverURLs":"https://ownidaop.lc-cn-n1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
